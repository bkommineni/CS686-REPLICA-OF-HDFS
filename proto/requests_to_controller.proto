syntax = "proto3";
option java_package = "edu.usfca.cs.dfs";

//Client
message StoreChunkRequest
{
    string filename = 1;
    int32  chunkId  = 2;
}

message RetrieveFileRequest
{
    string filename = 1;
}

//StorageNode
message Enroll
{
    int32 port = 1;
    string hostname = 2;
}

message Heartbeat
{
    int32 port = 1;
    string hostname = 2;

    message ChunkMetadata
    {
        string filename = 1;
        int32  chunkId  = 2;
    }

    repeated ChunkMetadata metadata = 3;
}

message AcknowledgeStoreChunk
{
    string filename = 1;
    int32  chunkId  = 2;
    int32  port     = 3;
    string hostname = 4;
}

message RequestsToControllerWrapper {
    oneof msg {
        StoreChunkRequest storeChunkRequestMsg = 1;
        RetrieveFileRequest retrieveFileRequestMsg = 2;
        AcknowledgeStoreChunk acknowledgeStoreChunkMsg = 3;
        Enroll enrollMsg = 4;
        Heartbeat heartbeatMsg = 5;
    }
}